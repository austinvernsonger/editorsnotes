{% extends "base.html" %}

{% block title %}{{ term.preferred_name }}{% endblock %}

{% block content %}
    <header>
      <h1>{{ term.preferred_name }}</h1>
    </header>

    {% if note_dict %}
    <section id="notes">
      <h2>Notes</h2>
      {% for note, refs in note_dict %}
      <article class="note">
        <div class="note-content">
          {{ note.content_as_html|safe }}
        </div>
        {% if refs %}
        <div class="reference-list">
          {% for ref in refs %}
          <div class="reference">
            {{ ref.citation_as_html|safe }}
          </div>
          {% endfor %}
        </div>
        {% endif %}
        <div class="edit-history">
          {{ note.edit_history|safe }}
        </div>
      </article>
      <hr/>
      {% endfor %}
    </section>
    {% else %}
    <div id="no-notes">
      We don't have any notes on this topic yet.
    </div>
    {% endif %}

    {% if query_dict %}
    <section id="queries">
      <h2>Queries</h2>
      {% for query, refs in query_dict %}
      <article class="note">
        <div class="note-content">
          {{ query.content_as_html|safe }}
        </div>
        {% if refs %}
        <div class="reference-list">
          {% for ref in refs %}
          <div class="reference">
            {{ ref.citation_as_html|safe }}
          </div>
          {% endfor %}
        </div>
        {% endif %}
        <div class="edit-history">
          {{ query.edit_history|safe }}
        </div>
      </article>
      {% endfor %}
    </section>
    {% endif %}

    <aside id="metadata">
      <div id="publisher">
        Published by the <a href="/">Editors' Notes Project</a>
      </div>
      <div id="updated" class="quiet">
        Last updated {{ last_updated_display|safe }} by <span class="attribution">{{ last_updater }}</span>
      </div>
    </aside>
{% endblock %}
