{% extends "base.html" %}

{% block title %}: Results for '{{ query }}'{% endblock %}

{% load highlight display %}

{% block content %}
<div id="searchresults" class="span-24 last">
{% if query %}
  {% if results %}
  <p id="message">Search results for <em>{{ query }}</em>:</p>
  <ol class="span-18 last">
    {% for result in results %}
    <li class="searchresult">
      {{ result.verbose_name }}:
      <a href="{{ result.object.get_absolute_url }}">
        {{ result.title }}
      </a>
      {% if result.object.last_updater %}
      <div class="quiet">
        Last edited by {{ result.object.last_updater|display_user }}
        {{ result.object.last_updated|timeago }}.
      </div>
      {% endif %}
      <div>
        {% highlight result.text with query %}
      </div>
      {% if result.verbose_name == 'Note' %}
        {% with result.object as note %}
          {% include "note_topics.include" %}
        {% endwith %}
      {% endif %}
    </li>
    {% endfor %}
  </ol>
  {% else %}
  <p id="message">No results for <em>{{ query }}</em>.</p> 
  {% endif %}
</div>
{% endif %}

{% endblock %}